# 配置小程序 API 地址

## ✅ 已找到访问地址

从您的页面看到，公网访问已开启，访问地址是：
```
https://tci-184647-5-1377481866.sh.run.tcloudbase.com
```

---

## 🚀 已自动配置

我已经帮您修改了 `config/index.js` 文件，将生产环境的 API 地址设置为您的云托管地址。

---

## 📝 配置说明

### 当前配置

**开发环境**（本地开发）：
- 使用：`http://localhost:3000`

**生产环境**（小程序发布）：
- 使用：`https://tci-184647-5-1377481866.sh.run.tcloudbase.com`

---

## 🔧 下一步操作

### 步骤1：重新编译小程序

1. **在项目目录中运行**：
   ```bash
   pnpm build:weapp
   ```

2. **或使用微信开发者工具**：
   - 点击"编译"按钮
   - 或使用快捷键重新编译

---

### 步骤2：测试连接

1. **在微信开发者工具中打开小程序**
2. **查看控制台日志**：
   - 应该看到：`[tRPC] API Base URL: https://tci-184647-5-1377481866.sh.run.tcloudbase.com`
3. **测试 AI 功能**：
   - 尝试使用 AI 咨询功能
   - 查看是否能正常连接

---

## ⚠️ 重要提示

### 关于测试域名

从页面提示看到：
> "公网域名仅能支持测试使用,请勿用于线上生产,且公网域名没有防刷防 DDoS 能力。"

**说明**：
- 当前地址 `https://tci-184647-5-1377481866.sh.run.tcloudbase.com` 是测试域名
- 适合开发和测试使用
- 正式生产环境建议绑定自定义域名

---

### 如果需要自定义域名

1. **在"服务设置"页面**
2. **查看"自定义域名"标签**（如果有）
3. **绑定您自己的域名**
4. **更新 `config/index.js` 中的地址**

---

## 📋 配置检查清单

- [x] 公网访问已开启
- [x] 访问地址已获取：`https://tci-184647-5-1377481866.sh.run.tcloudbase.com`
- [x] `config/index.js` 已更新
- [ ] 小程序已重新编译
- [ ] 测试连接成功

---

## 🎯 现在请

1. **重新编译小程序**：
   ```bash
   pnpm build:weapp
   ```

2. **测试连接**：
   - 在微信开发者工具中打开小程序
   - 尝试使用 AI 功能
   - 查看是否能正常连接

3. **如果还有问题**：
   - 查看小程序控制台的错误信息
   - 告诉我具体的错误

---

## 💡 提示

- **服务已经运行**：从之前的日志看，后端服务正常
- **地址已配置**：已更新为云托管地址
- **需要重新编译**：修改配置后必须重新编译小程序才能生效

**请重新编译小程序，然后测试连接！**
