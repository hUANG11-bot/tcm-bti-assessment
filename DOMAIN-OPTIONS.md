# 域名绑定选项说明

## 🎯 您的域名：`er1.store`

您可以使用两种方式绑定域名：

---

## 方案1：使用主域名（可以使用）

**直接使用**：`er1.store`

### 优点
- ✅ 简单直接
- ✅ 不需要配置子域名

### 缺点
- ⚠️ 如果主域名有其他用途（如网站），可能会有冲突
- ⚠️ 不够灵活，后续扩展不便

### 配置步骤

1. **在云托管中绑定**
   - 输入：`er1.store`
   - 不要输入 `https://er1.store`

2. **配置DNS解析**
   - 主机记录：`@` 或留空（表示主域名）
   - 记录类型：`CNAME`
   - 记录值：云托管提供的CNAME值

3. **配置服务器域名**
   - 在微信公众平台添加：`https://er1.store`

4. **编译小程序**
   ```bash
   set TARO_APP_API_URL=https://er1.store && pnpm build:weapp
   ```

---

## 方案2：使用子域名（推荐）

**使用子域名**：`api.er1.store`

### 优点
- ✅ 不影响主域名的其他用途
- ✅ 更灵活，可以单独管理
- ✅ 更专业，符合API服务的命名习惯
- ✅ 后续可以添加其他子域名（如：`www.er1.store`、`admin.er1.store`）

### 缺点
- 需要额外配置一个DNS记录

### 配置步骤

1. **在云托管中绑定**
   - 输入：`api.er1.store`
   - 不要输入 `https://api.er1.store`

2. **配置DNS解析**
   - 主机记录：`api`
   - 记录类型：`CNAME`
   - 记录值：云托管提供的CNAME值

3. **配置服务器域名**
   - 在微信公众平台添加：`https://api.er1.store`

4. **编译小程序**
   ```bash
   set TARO_APP_API_URL=https://api.er1.store && pnpm build:weapp
   ```

---

## 💡 推荐方案

**推荐使用子域名**：`api.er1.store`

**原因**：
1. 更专业：API服务通常使用子域名
2. 更灵活：主域名可以用于其他用途（如网站）
3. 更安全：即使API域名有问题，不影响主域名
4. 更易管理：可以单独管理API服务

---

## 📋 两种方案对比

| 项目 | 主域名 `er1.store` | 子域名 `api.er1.store` |
|------|-------------------|------------------------|
| DNS主机记录 | `@` 或留空 | `api` |
| 灵活性 | ⚠️ 较低 | ✅ 高 |
| 专业性 | ⚠️ 一般 | ✅ 更专业 |
| 推荐度 | ⚠️ 可用但不推荐 | ✅ **推荐** |

---

## 🚀 快速开始（使用子域名推荐）

### 步骤1：在云托管中绑定

1. 进入：**云服务** → **云开发** → **云托管** → **服务管理** → **自定义域名**
2. 点击"绑定域名"
3. 输入：`api.er1.store`
4. 复制CNAME记录值

### 步骤2：配置DNS解析

在您的域名服务商（`er1.store` 的DNS管理）：

1. 添加CNAME记录：
   ```
   主机记录: api
   记录类型: CNAME
   记录值: express-w0qu-184647-5-1377481866.sh.run.tcloudbase.com
   ```
   （记录值替换为云托管实际提供的CNAME值）

2. 保存并等待DNS生效

### 步骤3：等待域名验证

1. 返回云托管页面
2. 等待域名验证和HTTPS证书配置
3. 确认状态为"已绑定"

### 步骤4：配置服务器域名

1. 微信公众平台 → **开发** → **开发管理** → **开发设置**
2. 在"request合法域名"中添加：`https://api.er1.store`

### 步骤5：重新编译小程序

```bash
set TARO_APP_API_URL=https://api.er1.store && pnpm build:weapp
```

---

## ⚠️ 重要提示

### 域名格式要求

✅ **正确**：
- `er1.store`（主域名）
- `api.er1.store`（子域名）

❌ **错误**：
- `https://er1.store`（包含协议）
- `er1.store:3000`（包含端口）
- `er1.store/api`（包含路径）

### DNS记录配置

**如果使用主域名 `er1.store`**：
- 主机记录：`@` 或留空
- 记录类型：`CNAME`
- 记录值：云托管提供的CNAME值

**如果使用子域名 `api.er1.store`**：
- 主机记录：`api`
- 记录类型：`CNAME`
- 记录值：云托管提供的CNAME值

---

## 📞 需要帮助？

如果遇到问题：

1. **DNS配置问题**：联系您的域名服务商
2. **域名绑定问题**：查看云托管文档或联系云开发客服
3. **不确定使用哪种**：推荐使用子域名 `api.er1.store`
