# 推送代码指南（解决权限问题）

## 🔍 当前问题

Git 操作遇到权限问题，无法完成 rebase。建议使用 Cursor 图形界面推送。

---

## 🚀 方法1：使用 Cursor 图形界面推送（推荐）

### 步骤1：中止当前的 rebase

在 Cursor 终端中执行：

```powershell
cd d:\tcm-bti-assessment
git rebase --abort
```

如果仍然失败，可以尝试：

```powershell
cd d:\tcm-bti-assessment
git reset --hard HEAD
git clean -fd
```

**注意**：这会丢弃未提交的更改，但您的代码已经提交了，所以是安全的。

---

### 步骤2：在 Cursor 中推送

1. **按 `Ctrl+Shift+G` 打开源代码管理**

2. **查看提交历史**：
   - 应该能看到您的提交："修复：使用 axios 替代 fetch，解决微信 API SSL 证书验证问题"

3. **点击"..."菜单**（三个点）

4. **选择"Push" → "Push to..."**

5. **选择 `origin` 和 `main` 分支**

6. **等待推送完成**

---

## 🚀 方法2：只推送关键文件

如果图形界面也有问题，可以创建一个新分支推送：

```powershell
cd d:\tcm-bti-assessment

# 创建新分支
git checkout -b fix-ssl-certificate

# 只添加关键文件
git add server/api/wechat-login.ts
git commit -m "修复：使用 axios 替代 fetch，解决微信 API SSL 证书验证问题"

# 推送新分支
git push origin fix-ssl-certificate
```

然后在 GitHub 上创建 Pull Request 合并到 main。

---

## 🚀 方法3：手动上传代码包（如果 Git 有问题）

如果 Git 推送一直有问题，可以暂时使用手动上传：

### 步骤1：构建代码

```powershell
cd d:\tcm-bti-assessment
npm run build
```

### 步骤2：创建部署压缩包

```powershell
Compress-Archive -Path dist,server,shared,package.json,pnpm-lock.yaml,Dockerfile -DestinationPath deploy.zip -Force
```

### 步骤3：上传到云托管

1. 登录微信云托管控制台
2. 进入：服务 `tci` → 部署发布
3. 选择"手动上传代码包"
4. 上传 `deploy.zip`
5. 设置端口：`3000`
6. 点击"发布"

---

## ✅ 推荐方案

**优先使用方法1（Cursor 图形界面）**，如果不行再使用方法3（手动上传）。

---

## 🎯 推送完成后

1. **在微信云托管控制台触发部署**（如果未配置自动部署）
2. **等待部署完成**（5-10 分钟）
3. **重启服务**
4. **测试登录功能**
